(function(e){function t(t){for(var r,n,o=t[0],c=t[1],l=t[2],h=0,p=[];h<o.length;h++)n=o[h],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],r=!0,o=1;o<i.length;o++){var c=i[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=n(n.s=i[0]))}return e}var r={},a={app:0},s=[];function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/battleship/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"327c":function(e,t,i){"use strict";var r=i("9eb4"),a=i.n(r);a.a},"5c0b":function(e,t,i){"use strict";var r=i("9c0c"),a=i.n(r);a.a},"9c0c":function(e,t,i){},"9eb4":function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r,a=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("gameboard")],1)},n=[],o=i("d4ec"),c=i("262e"),l=i("2caf"),u=i("9ab4"),h=i("60a3"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"root"},[i("h2",[e._v("Enemy Ships")]),i("div",{staticClass:"player-board",class:!e.setupPhase&&"focus"},e._l(e.player1.board.board,(function(t,r){return i("div",{key:"pr"+r,staticClass:"board-row"},e._l(t,(function(t,a){return i("span",{key:"pc"+a,staticClass:"board-cell",attrs:{id:"pc"+r+"-"+a},on:{click:function(t){return e.makeMove(t,r,a)}}})})),0)})),0),e._m(0),i("div",{attrs:{id:"messages"}},[i("div",{staticClass:"message"},[e._v(e._s(e.message))]),i("hr"),i("div",{staticClass:"message"},[e._v(e._s(e.enemyMessage))])]),i("h2",[e._v("Your Ships")]),i("div",{staticClass:"enemy-board",class:e.setupPhase&&"focus"},e._l(e.player2.board.board,(function(t,r){return i("div",{key:"er"+r,staticClass:"board-row"},e._l(t,(function(t,a){return i("span",{key:"ec"+a,staticClass:"board-cell",class:e.hasShip(r,a,2)&&"set-ship",attrs:{id:"ec"+r+"-"+a},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.placeShip(t,r,a,!1)},contextmenu:function(t){return e.placeShip(t,r,a,!0)}}})})),0)})),0),e._m(1)])},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"enemy-ships-list"},[i("ul",[i("li",{attrs:{id:"e-destroyer"}},[e._v("Destroyer")]),i("li",{attrs:{id:"e-cruiser"}},[e._v("Cruiser")]),i("li",{attrs:{id:"e-submarine"}},[e._v("Submarine")]),i("li",{attrs:{id:"e-battleship"}},[e._v("Battleship")]),i("li",{attrs:{id:"e-carrier"}},[e._v("Carrier")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"player-ships-list"},[i("ul",[i("li",{attrs:{id:"p-destroyer"}},[e._v("Destroyer")]),i("li",{attrs:{id:"p-cruiser"}},[e._v("Cruiser")]),i("li",{attrs:{id:"p-submarine"}},[e._v("Submarine")]),i("li",{attrs:{id:"p-battleship"}},[e._v("Battleship")]),i("li",{attrs:{id:"p-carrier"}},[e._v("Carrier")])])])}],d=(i("99af"),i("3835")),y=i("bee2");i("b0c0"),i("a623"),i("cb29"),i("4160"),i("d81d"),i("159b"),i("c740"),i("c975");(function(e){e[e["Destroyer"]=0]="Destroyer",e[e["Cruiser"]=1]="Cruiser",e[e["Submarine"]=2]="Submarine",e[e["Battleship"]=3]="Battleship",e[e["Carrier"]=4]="Carrier"})(r||(r={}));var v=function(){function e(t){var i=this;switch(Object(o["a"])(this,e),this.getLength=function(){return i.length},this.getType=function(){return i.type},this.getHits=function(){return i.hits},this.getPosition=function(){return i.position},this.isSunk=function(){return i.sunk},t){case r.Destroyer:this.length=2,this.type="Destroyer";break;case r.Cruiser:this.length=3,this.type="Cruiser";break;case r.Submarine:this.length=3,this.type="Submarine";break;case r.Battleship:this.length=4,this.type="Battleship";break;case r.Carrier:this.length=5,this.type="Carrier";break}this.hits=new Array(this.length).fill(!1),this.sunk=!1,this.position=new Array(this.length).fill([0,0])}return Object(y["a"])(e,[{key:"placeShip",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r!==this.length;r++)this.position[r]=i?[e,t++]:[e++,t]}},{key:"hit",value:function(e,t){var i=this.position.findIndex((function(i){return JSON.stringify(i)===JSON.stringify([e,t])}));return-1!==i?(this.hits[i]=!0,-1===this.hits.indexOf(!1)&&(this.sunk=!0),[!0,this.getType(),this.sunk]):[!1,"",this.sunk]}}]),e}(),b=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(o["a"])(this,e),this.getBoard=function(){return t.board},this.board=new Array(i).fill(null).map((function(e){return new Array(i).fill(-1)})),this.hitMap=new Array(i).fill(null).map((function(e){return new Array(i).fill(!1)})),this.ships=new Array}return Object(y["a"])(e,[{key:"cellIsEmpty",value:function(e,t){try{return-1===this.board[e][t]}catch(i){return!1}}},{key:"canPlaceShip",value:function(e){var t=this;return e.getPosition().map((function(e){var i=Object(d["a"])(e,2),r=i[0],a=i[1];return t.cellIsEmpty(r,a)})).every((function(e){return!1!==e}))}},{key:"placeShip",value:function(e,t,i){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=new v(e);if(s.placeShip(t,i,a),!this.canPlaceShip(s))return!1;s.getPosition();return s.getPosition().forEach((function(e){var t=Object(d["a"])(e,2),i=t[0],a=t[1];r.board[i][a]=r.ships.length})),this.ships.push(s),!0}},{key:"isIllegalMove",value:function(e,t){return this.hitMap[e][t]}},{key:"recordMove",value:function(e,t){this.hitMap[e][t]=!0}},{key:"receiveAttack",value:function(e,t){var i,r;return this.hitMap[e][t]=!0,null!==(i=null===(r=this.ships[this.board[e][t]])||void 0===r?void 0:r.hit(e,t))&&void 0!==i&&i}},{key:"allShipsSunk",value:function(){return this.ships.length>0&&this.ships.every((function(e){return e.isSunk()}))}}]),e}(),m=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o["a"])(this,e),this.name=t,this.board=new b,this.ai=i}return Object(y["a"])(e,[{key:"getRandomMove",value:function(){var e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());return[e,t]}},{key:"makeAiMove",value:function(){var e=this.getRandomMove(),t=Object(d["a"])(e,2),i=t[0],r=t[1];while(this.board.isIllegalMove(i,r)){var a=this.getRandomMove(),s=Object(d["a"])(a,2);i=s[0],r=s[1]}return[i,r]}}]),e}(),g=function(e){Object(c["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.call(this),e.player1=new m("Player"),e.player2=new m("Computer",!0),e.message="Welcome to Battleship. Begin by placing your Destroyer.",e.enemyMessage="Left click to place vertically, right click to place horizontally.",e.shipsPlaced=0,e.setupPhase=!0,e.gameOver=!1,e}return Object(y["a"])(i,[{key:"beforeMount",value:function(){this.placeShipsRandom(this.player1.board)}},{key:"getRandomNumber",value:function(e){return Math.floor(Math.random()*e)}},{key:"placeShipsRandom",value:function(e){var t=0;while(5!==t){var i=this.getRandomNumber(10)%2===0,r=this.getRandomNumber(i?9:9-t),a=this.getRandomNumber(i?9-t:9);e.placeShip(t,r,a,i)&&t++}}},{key:"aiMove",value:function(){var e=this.player2.makeAiMove(),t=Object(d["a"])(e,2),i=t[0],r=t[1],a=this.player2.board.receiveAttack(i,r),s=document.querySelector("#ec".concat(i,"-").concat(r));s.textContent=a?"O":"X",s.classList.add(a?"ship-hit":"ship-miss"),this.enemyMessage="Your enemy attacks at ".concat(i,",").concat(r,". ").concat(a?a[2]?"They sink your ".concat(a[1],"."):"They hit your ".concat(a[1],"."):"They miss."),a[2]&&document.querySelector("#p-".concat(a[1].toLowerCase())).classList.add("sunk"),this.player2.board.allShipsSunk()&&(this.message="Oh, no!",this.enemyMessage="Your enemy sunk all your ships. You lose.",this.gameOver=!0)}},{key:"makeMove",value:function(e,t,i){if(!this.setupPhase&&!this.gameOver)if(this.player1.board.isIllegalMove(t,i))console.log("Illegal move: "+[t,i]);else{var r=this.player1.board.receiveAttack(t,i);e.target.textContent=r?"O":"X",e.target.classList.add(r?"ship-hit":"ship-miss"),this.message="You attack at ".concat(t,",").concat(i,". ").concat(r?r[2]?"You sink your enemy's ".concat(r[1],"."):"You hit one of your enemy's ships.":"You miss."),r[2]&&document.querySelector("#e-".concat(r[1].toLowerCase())).classList.add("sunk"),this.player1.board.allShipsSunk()?(this.message="Congratulations!",this.enemyMessage="You sunk all your enemy's ships. You win!",this.gameOver=!0):this.aiMove()}}},{key:"placeShip",value:function(e,t,i,a){this.setupPhase&&(e.preventDefault(),this.player2.board.placeShip(this.shipsPlaced,t,i,a)&&(this.message="".concat(r[this.shipsPlaced]," placed at ").concat(t,",").concat(i,"."),this.shipsPlaced++,5===this.shipsPlaced?(this.enemyMessage="All ships placed. Make your first attack!",this.setupPhase=!1):this.enemyMessage="Now place your ".concat(r[this.shipsPlaced],".")))}},{key:"hasShip",value:function(e,t,i){return 1===i?!this.player1.board.cellIsEmpty(e,t):!this.player2.board.cellIsEmpty(e,t)}}]),i}(h["b"]);g=Object(u["a"])([h["a"]],g);var k=g,O=k,S=(i("327c"),i("2877")),_=Object(S["a"])(O,p,f,!1,null,"26625596",null),M=_.exports,j=function(e){Object(c["a"])(i,e);var t=Object(l["a"])(i);function i(){return Object(o["a"])(this,i),t.apply(this,arguments)}return i}(h["b"]);j=Object(u["a"])([Object(h["a"])({components:{gameboard:M}})],j);var w=j,C=w,P=(i("5c0b"),Object(S["a"])(C,s,n,!1,null,null,null)),x=P.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(x)}}).$mount("#app")}});
//# sourceMappingURL=app.c8de8e74.js.map